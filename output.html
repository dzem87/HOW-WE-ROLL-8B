<!DOCTYPE html>
  <html lang="no">
  <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>OUTPUT</title>

        <style>
      canvas {
        position: absolute;
      }
            .center {
                margin: 0 auto;
                text-align: center;
                width: 500px;
            }
            #canvas {
                z-index: 100;
            }

        </style>


  </head>
  <body >

        <!--Her brukes div id center over canvas elementene for å plassere de i midten-->
    <canvas width="1000px" height="1000px" id="canvas"></canvas>
    <canvas width="1000px" height="1000px" id="canvas2"></canvas>
    
<script>
    //Henter all daten sendt inn fra input siden fra serveren 
    const urls = ["https://bacit.info/hwr/20221212230609-8639e31a8793c3000ab5d9fb8900c905.json",
              "https://bacit.info/hwr/20221212230622-ca01c7442d57bcb838a59d34a461bbeb.json",
              "https://bacit.info/hwr/20221212230638-dcd1426e46d369f1aca42f267711e9f8.json",
              "https://bacit.info/hwr/20221212230704-68dd675a38d46c0b022efb9f9eb87643.json",
              "https://bacit.info/hwr/20221212230718-89673f240a7234220defb3b8fc4f3628.json",
];
Promise.all(urls.map(url =>
    fetch(url).then(resp => resp.json())
)).then(data => {

    let colors = []
    for (let j = 0; j < data.length; j++) {
    // Generate random red, green, and blue values
    let red = Math.floor(Math.random() * 256);
    let green = Math.floor(Math.random() * 256);
    let blue = Math.floor(Math.random() * 256);
    let color = "rgb(" + red + "," + green + "," + blue + ")";
    // Check if the color already exists in the array
    if (!colors.includes(color)) {
        // Add the color if it doesn't exist
        colors.push(color)
    }
}

function drawCircle(x, y, color, name) {
  // Get the canvas element and its 2D context
  var canvas = document.getElementById('canvas');
  var ctx = canvas.getContext("2d");
  // Draw the circle using the x and y coordinates and the specified color
  ctx.beginPath();
  ctx.lineWidth = 2;
  ctx.fillStyle = color;
  ctx.strokeStyle = 'black';
  ctx.arc(x, y, 8, 0, Math.PI*2, true);
  ctx.font = "16px Arial";
  ctx.fillText(name, 620, y+5);
  ctx.stroke();
  ctx.fill();
  ctx.closePath();
}
function drawDashedLine(y) {
  // Get the canvas element and its 2D context
  var canvas = document.getElementById('canvas2');
  var ctx = canvas.getContext("2d");
  // Draw the lines
  ctx.beginPath();
  ctx.moveTo(40, y);
  ctx.lineTo(460, y);
  ctx.strokeStyle = 'black';
  ctx.stroke();
  ctx.closePath();
}
function drawHeader(header, y) {
  // Get the canvas element and its 2D context
  var canvas = document.getElementById('canvas');
  var ctx = canvas.getContext("2d");
  // Calculate the x-coordinate for the text
  var textWidth = ctx.measureText(header).width;
  var textX = (520 - textWidth) / 2;
  // Draw the header using the specified y and x coordinate
  ctx.beginPath();
  ctx.font = "16px Arial";
  ctx.fillStyle = "black";
  ctx.fillText(header, textX, y -15);
  ctx.closePath();
}
function drawText(tekst, x, y) {
  // Get the canvas element and its 2D context
  const canvas = document.getElementById('canvas');
  const ctx = canvas.getContext("2d");
  ctx.beginPath();
  ctx.font = "15px Arial";
  ctx.fillStyle = "black";
  ctx.fillText(tekst, x, y + 25);
  ctx.closePath();
}
function drawHeaderAndText(header, text_left, text_right, y) {
  drawDashedLine(y);
  drawHeader(header, y);
  drawText(text_left, 43, y);
  drawText(text_right, 400, y);
}

let header = ["Når står du opp?", "Hvordan liker du å jobbe?",
"Hvordan løser du konfliker?","Hvordan er tankeprossesen din?",
"Når ønsker du å bli kontaktet?","Hvordan ønsker du å diskutere oppgaver?",
"Ønsker du å jobbe etter en timeplan?"];
let text_left = ["08:00", "Alene","Fortell alt", "Ta det opp","Oppsatt møte", "Videomøter","Normal 9 - 4", "Sammen"];
let text_right = ["12:00", "Med andre","Til poenget", "Gå fremmover","Ring når du vil", "Tekstmelding","Når det passer"];

let y2 = 150;
for (let i = 0; i < data.length; i++) {
    let color = colors[i];
    let y = 150;

    drawCircle(600, y2, color, data[i].navn);
    y2 += 20;
  // Get the current element
  let element = data[i];
  
  // Iterate over the properties of the current element
  for (let property in element) {
    if (property === "navn" || property === "trxid" || property === "time") continue;
    // Call drawDashedLine() with the current y coordinate
    let x = element[property];

    drawCircle(x, y, color, "");
    // Increment the y coordinate for the next iteration
    y += 100;
  }  
}
const objectLength = Object.keys(data[0]).length - 3;
  let y = 150;
  for (let i = 0; i < objectLength; i++) {

        drawHeaderAndText(header[i], text_left[i], text_right[i], y);
        drawDashedLine(y);

        // Increment the y coordinate for the next iteration
        y += 100;
}

});
  





    </script>


  </body>
  </html>